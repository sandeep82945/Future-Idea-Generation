Procuring flexibility services from energy consumers has been a potential solution to accommodating renewable generations in future power system. However, efficiently and securely coordinating the behaviors of diverse market participants within a privacy-preserving environment remains a challenge. This paper addresses this issue by introducing a game-theoretic market framework for real-time energy balancing. The competition among energy consumers is modeled as a Generalized Nash Game (GNG), which enables the analysis of their strategic decisionmaking. To mitigate the market power exerted by active energy consumers, we employ a supply function-based bidding method in this market design. We incorporate physical constraints to ensure the secure operation of the distribution network. Previous approaches to steering consumers towards the Generalized Nash Equilibrium (GNE) of this game often necessitate the sharing of private information, either in full or in part, which may not be practically feasible. To overcome this limitation, we propose a preconditioned forward-backward algorithm, with analytical convergence guarantees, that only requires participants to share limited, non-private sensitive information with others. Finally, numerical simulations on the enhanced IEEE 33-bus test case validate the effectiveness of our proposed market mechanism and algorithm. ii. system model  a. balancing market model In a balancing market, fairly accurate predictions of energy supply and demand are available. These predictions often deviate from the previous energy schedules determined via day-ahead ones, leading to a mismatch of real-time supply and demand (i.e., supply deficit or surplus) at the interface between the transmission and distribution network. The Balance Responsible Party (BRP) is responsible for accommodating this mismatch and acts as the operator in the balancing market [28]. To this end, the BRP utilizes the flexible resources of consumers in the distribution network. We consider two types of consumers, namely active and passive ones denoted by N = {1, 2, . . . , N} and M = {N + 1, N + 2, . . . , N +M}, respectively. An active consumer is equipped with at least one flexible resource, such as a dispatchable generator or an adjustable load. Hence, it can adjust its energy generation or consumption locally to respond to the energy mismatch. On the other hand, a passive consumer has a fixed demand and no dispatchable generation units. Moreover, each consumer n ∈ N ∪ M is connected to the distribution network. The Distribution System Operator (DSO) ensures the secure operation of the distribution network. Fig. 1 illustrates the interactions between all these market participants. We consider the market operation as follows:
• Each active consumer n ∈ N bids a linear function xn = αnλ+ βn, (1)
to the BRP, which describes its desire to provide flexibility xn as a function of a price λ ∈ R that it is expected to be paid by the BRP. The ultimate aim of the submitted bid is to maximize the consumer’s net revenue, that is, to minimize Jn(xn) = Cn(xn)− λxn, (2) where Cn(xn) is the cost or disutility of providing flexibility and λxn is the payment from the BRP. More-
over, the flexibility of each consumer should satisfy the following constraint: 0 ≤ xn ≤ x̂n, (3) where x̂n is the maximum available flexibilty. • The BRP collects the bids and clears the market based on a pay-as-clear procedure such that∑
n∈N xn = xtot. (4)
where xtot ∈ R+ denotes the total flexibility that is required to fulfill the mismatch between total supply and demand in the distribution network. • The allocated flexibility xn resulting from this market should be feasible for the distribution system. The DSO performs this validation and modifies the allocation, if necessary, to meet the physical network constraints. In the next subsection, we elaborate on the physical network constraints model that are relevant in the validation phase conducted by the DSO as stated above. b. physical network model Here, we give the mathematical model of the distribution network where all the consumers are physically connected. We represent the distribution network D(B,L) as a simple directed graph where the buses and lines are represented by B = {1, 2, ..., B} and L ⊆ B × B, respectively. That is, if ℓ = (b, s) ∈ L, then line ℓ originates from bus b ∈ B and ends in bus s ∈ B. Note that the direction of lines can be chosen arbitrarily. We denote the set of out-neighbors and inneighbors of b by Bbout := {s | (b, s) ∈ L}, Bbin := {s | (s, b) ∈ L}, respectively. Furthermore, we define the incidence matrix E = [eℓ,b] ∈ R|L|×|B| as
eℓ,b =  +1 if line ℓ leaves bus b, −1 if line ℓ enters bus b, 0 otherwise. We assume that the transmission and distribution networks are connected via a single bus, which we take without loss of generality as bus 1. Finally, we use Mb and N b to denote the set of passive and active consumers connected to each bus b ∈ B \ {1}. An example of the physical network is depicted in Fig. 2. To ensure the secure operation of the power system, the DSO imposes the physical constraints of the distribution
iv
network, namely, power-flow constraints. In what follows, we incorporate the flexibility provision into power-flow equations and write these equations along the distribution network security constraints in a compact form. By adopting the linear lossless power flow equations in [29], the active and reactive power flow p(b,s) and q(b,s) through line (b, s) ∈ L are given by
p(b,s) = −w(b,s)(θb − θs) + u(b,s)(vb − vs), q(b,s) = −u(b,s)(θb − θs)− w(b,s)(vb − vs),
(5)
where u(b,s) and w(b,s) denote the conductance and susceptance of line (b, s), and vb and θb indicate the voltage magnitude and angle of bus b ∈ B, respectively. Furthermore, for each bus b ∈ B, the power balance must hold, namely∑
s∈Bbout p(b,s) − ∑ s∈Bbin
p(s,b) = pb,∑ s∈Bbout q(b,s) − ∑ s∈Bbin q(s,b) = qb. (6)
where pb and qb are the net active and reactive power injections at bus b ∈ B. Note that bus 1 is considered as the slack bus in the power flow equations above. As a result, we have v1 = 1, θ1 = 0, and p1 and q1 are variables. Next, we impose the security constraints for each bus b ∈ B and line (b, s) ∈ L as [26]
p2(b,s) + q 2 (b,s) ≤ z 2 (b,s),
θ ≤ θb ≤ θ, v ≤ vb ≤ v,
(7)
where the first inequality represents the line capacity constraint at each line, with the maximum line capacity denoted by z(b,s), and the last two inequalities represent the safe limits of the voltage phase angles and magnitudes. We write the power flow and security constraints (5), (6) and (7) as follows. PL = −WEθ + UEv, QL = −UEθ −WEv, E⊤PL = PB, E ⊤QL = QB,
PL ⊙ PL +QL ⊙QL ≤ Z ⊙ Z, θ1 ≤ θ ≤ θ1, v1 ≤ v ≤ v1,
(8)
where ⊙ is the Hadamard product, E is the incidence matrix of the distribution network and
PB = col(pb), QB = col(qb),
PL = col(p(b,s)), QL = col(q(b,s)),
W = diag(w(b,s)), U = diag(u(b,s)),
Z = col(z(b,s)), θ = col(θb), v = col(vb),
with b ∈ B and (b, s) ∈ L. Now, let the constant dn ∈ R be the predicted net active load of the consumer n ∈ N ∪ M in the balancing market. Then, as a result of the net active loads and flexibility, we have
pb = − ( ∑ n∈Mb dn + ∑ n∈N b (dn ∓ xn) ) , (9)
for each b ∈ B \ {1}. The flexibility xn appears with a minus (plus) sign if there is a supply deficit (surplus) in the distribution network, leading the consumers to inject (withdraw) additional power to/from the network. We note that the flexibility xn contributes only to the compensation of the active power. Throughout the rest of this paper, we indicate the DSO security constraints by (8) and (9). iii. game formulation and analysis We consider the situation where each active consumer in the distribution network is rational and makes a strategic decision to provide flexibility services in the balancing market. The aim of this section is to formulate the competition among these consumers as a game and characterize the resulting (generalized) Nash equilibrium. At this equilibrium, no consumer is willing to unilaterally deviate from its bid and, moreover, the physical network constraints are satisfied. a. game formulation First, we complement the market structure proposed in Section II-A by introducing a price clearing mechanism. Recall that each active consumer n ∈ N bids its available flexibility as a linear function in (1). Upon gathering the bids of all active consumers by the BRP, the market clears based on a pay-as-clear mechanism such that the matching condition in (4) holds. In the sequel, we assume that αn = α > 0 for all n ∈ N , a constraint which will be imposed by the BRP [20]. Consequently, from (1) and (4), the BRP computes the clearing price λ = (xtot − 1⊤β)/(αN), (10) and the corresponding allocated flexibility as xn = (xtot − 1⊤β)/N + βn, (11) where β = col(βn)n∈N . The vector of allocated flexibilities x = col(xn)n∈N can also be compactly written as x = Aβ + b, (12) where A = I − 1N 11
⊤ and b = xtotN 1. Next, we shift our attention to the consumers’ side. Since αn = α for all n ∈ N , βn can be interpreted as the decision variable of the active consumer n in submitting its bid, which aims to minimize its cost/disutility Cn(xn) in (2). Throughout the paper, we make the following assumption on this function. Assumption 1. The cost function Cn(xn) is convex, twice continuously differentiable, Cn(0) ≥ 0 and Cn(xn) > 0 for xn > 0. Moreover, C ′n := ∇Cn is Lipschitz continuous with κ > 0, i.e., ∥C ′n(x′n)−C ′n(xn)∥ ≤ κ∥x′n−xn∥,∀ 0 ≤ xn, x′n ≤ x̂n. (13)
v The fact that the price λ is set by the BRP according to (10) is considered public knowledge, which implies that the active consumers can submit their bids strategically. In particular, one can substitute λ and xn from (10) and (11) in (2) and rewrite it as
J̄n(βn, β−n) = Cn ( (xtot − 1⊤β)/N + βn ) − (xtot − 1⊤β +Nβn)(xtot − 1⊤β)/(αN2), (14) where β−n = col(βm)m∈N\{n}. Similarly, we can rewrite the constraint in (3) as
(xtot − 1⊤β)/N + βn ≤ x̂n, (15) (xtot − 1⊤β)/N + βn ≥ 0, (16)
for all n ∈ N , and the one in (9) as pb = − ∑ n∈N bp∪N ba dn ± ∑ n∈N b ( (xtot − 1⊤β)/N + βn ) , (17) for all b ∈ B \ {1}. As a result, each active consumer n ∈ N aims to minimize J̄n(βn, β−n) subject to the flexibility capacity constraints (15) and (16). Augmenting the latter optimization with the security constraints (8) and (17) enforced by the DSO, we arrive at the following optimization problem
min βn
J̄n(βn, β−n)
s.t. βn ∈ Kn(β−n), (18)
where the parametric set Kn(β−n) is defined as {βn ∈ R | (15), (16), (17) hold, and (8) holds for some v and θ}. From (18), we note that both the objective function and constraints of each active consumer depend on its own strategy as well as the strategies of other consumers. We now write the noncooperative game among active consumers in a compact form as the triple: G = {N ,K, col(J̄n(βn, β−n))n∈N }, (19) where K =
∏ n∈N Kn(β−n) is the set of feasible strategies for
the consumers. Noting that convexity is preserved under affine transformations, it is easy to verify that the set K is convex. Furthermore, to satisfy Slater’s constraint qualifications [30], we assume that K has at least one strictly feasible point. The competition among consumers in the game G gives rise to a GNG since their objective functions and the feasible strategy sets are coupled. Next, we analyze the GNE of this game. A point β∗ ∈ K is a GNE of the game, if for all n ∈ N , the following holds,
J̄n(βn, β ∗ −n) ≥ J̄n(β∗n, β∗−n), ∀ βn ∈ Kn(β∗−n). Our interest in the GNE of the game is due to the fact that at this point none of the consumers would unilaterally deviate from its strategy. In this paper, we focus on a specific subclass of GNE, namely v-GNE. Specifically, each player in the game is penalized equally for deviating from coupling constraints at the v-GNE, which also corresponds to the solution of a variational inequality problem 1 [23]. To characterize the v-GNE of the game G and verify its existence and uniqueness, we define the pseudo-gradient mapping of the game as
F := col(fn(βn, β−n))n∈N , (20)
1Given a mapping F : X → Rn, the variational inequality problem VI(X ,F) is to find the point x̄ ∈ X such that (x− x̄)⊤F (x̄) ≥ 0, ∀x ∈ X . where
fn(βn, β−n) := ∂
∂βn J̄n(βn, β−n)
= C ′n(xn) N − 1 N + (1⊤β − xtot)(N − 2) +Nβn αN2 . The map F is strongly monotone and Lipschitz continuous as stated in the following lemma:
Lemma 1. The pseudo-gradient mapping F in (20) is
i) strongly monotone if α < 2κ(N−1) , namely, for any β̄, β̃ ∈ K, (β̄ − β̃)⊤(F (β̄)− F (β̃)) ≥ ηF ∥β̄ − β̃∥2, where
ηF = 1 αN − κ(N − 1) 2N ,
ii) Lipschitz continuous with constant
κF = N − 1 N (κ+ 1 α ). The proof of Lemma 1 is provided in Appendix. Now, we state the main result of this subsection. Proposition 1. Assume that α < 2κ(N−1) .Then the game G has a unique v-GNE, which is given by the unique solution β∗ ∈ K to the variational inequality
(β − β∗)⊤F (β∗) ≥ 0, ∀β ∈ K. (21)
Proof. The mapping F is strongly monotone by Lemma 1 item i. Note that the set K is convex and closed. It follows from [31, Theorem 2.3.3] that VI ( K,F ) has a unique solution which corresponds to the unique v-GNE of the game G [23]. Remark 1. One can show that the condition assumed in Proposition 1 is not required for proving uniqueness of the v-GNE. In other words, the v-GNE, if exists, is unique. We resort to this assumption since, in any case, the convergence results of Section IV hinges on the strong monotonicity of the map F (·) established in Lemma 1. b. efficiency analysis The self-interested behaviors of energy consumers can lead to market inefficiency. To analyze this efficiency loss in the game G, we first introduce a social welfare maximization problem as the benchmark. From a social point of view, it is desirable to utilize the available flexible resources in such a way that the total cost/disutility of active energy consumers is minimized. If consumers are willing to cooperate and reveal their actual economic and technical characteristics to the BRP and DSO, then the efficient flexibility schedule can be found as the solution to the following social welfare optimization problem:
min x ∑ n∈N Cn(xn) s.t. (3), (4), (8) and (9), (22)
The following lemma relates the aforementioned social welfare optimization problem with the allocated feasibility at the v-GNE of the game G.
Lemma 2. Let β∗ be the v-GNE of the game G, i.e, the unique solution to the VI in (21), and x∗ be the corresponding allocated flexibility at this point, namely x∗ = Aβ∗ + b.
vi
Then, x∗ is the unique solution of the following optimization problem:
min x ∑ n∈N Dn(xn) s.t. (3), (4), (8) and (9), (23)
where Dn(xn) := Cn(xn) + x2n
2α(N−1) . The proof of Lemma 2 is provided in Appendix. Remark 2. The above lemma indicates that the allocated flexibility at the v-GNE of the game G, i.e. x∗, is different from the solution to the social welfare optimization (22). The additional nonnegative term x 2 n
2α(N−1) is due to the strategic bidding behavior of self-interested consumer n and Dn(xn) can be regarded as a fake cost function that consumer n submits to the BRP to gain more profit. We use Price of Anarchy (PoA) [32] to measure the efficiency loss of the game G, which indicates how the overall efficiency of a game degrades due to the strategic behavior of consumers. PoA is defined as the ratio of the total cost between the Nash Equilibrium and the social optimum. In our case, this gives rise to
PoA :=
∑ n∈N Cn(x
∗ n)∑
n∈N Cn(x̄n) , (24)
where x̄ is the solution to the social welfare optimization problem (22), and x∗ is the allocated flexibility at v-GNE of the game G. We then have the following result. Proposition 2. The price of anarchy in (24) satisfies
PoA < 1 + 1
2α(N − 1)
∑ n∈N x̄
2 n∑
n∈N Cn(x̄n) . (25)
Proof. We observe that∑ n∈N Cn(x ∗ n) < ∑ n∈N Dn(x ∗ n) ≤ ∑ n∈N Dn(x̄n), where the first inequality follows from the positivity of∑ n∈N (x∗n) 2 2α(N−1) , 2 and the second inequality follows from the fact that x∗ is the solution to the optimization problem (23). Hence, by using the definition of Dn(·), we obtain that∑
n∈N Cn(x
∗ n) < ∑ n∈N ( Cn(x̄n) + x̄2n 2α(N − 1) ) ,
which leads us to (25). Remark 3. The result of the above proposition provides an upper bound for PoA. This bound largely depends on the number of active energy consumers N and the parameter α. For sufficiently large quantity α(N−1), the upper bound gets close to 1 and the market power of each individual consumer decreases. iv. algorithm design Next, we present a practical protocol to compute the v-GNE of the game G discussed in the previous section, and establish analytical convergence guarantees for the proposed algorithm. a. algorithm description Before presenting our algorithm, we explain the restrictions in sharing information and knowledge available to each party
2Note that due to (3) and (4), there exists n ∈ N with x∗n > 0.
in the market mechanism. As for the consumers, they are not willing to reveal their economic and technical specifications, including the cost function Cn(xn) and the maximum available flexibility x̂n, to the BRP, DSO or any other consumer. The BRP, as the buyer of flexibility and the market operator, is not willing to share the required total flexibility xtot with the consumers. Finally, the physical specifications of the system, such as network topology and line parameters are only known to the DSO. Motivated by the above sharing limitations, to prepare for the algorithm, we split the feasible set K in (19), as K = Λ ∩ Ψ, where Λ := {β ∈ RN | (15) holds} and Ψ := {β ∈ RN | (8), (16) and (17) hold}. Note that the former contains the private information of consumers {x̂n}n∈N and will be handled by the consumers themselves in the algorithm. However, the latter set involves the nonprivate information of consumers alongside the DSO security constraints and will be handled by the DSO. Now, the proposed protocol is provided in Algorithm 1. Algorithm 1 v-GNE Seeking Algorithm Initialization and preparation: 1) Each n ∈ N sets initial conditions β0n ∈ R and γ0n ∈ R+
and positive step sizes ρn and νn. 2) Each n ∈ N : β0n, γ0n −→ BRP 3) BRP computes λ0 from (10), given the value of β0. 4) BRP : λ0,1⊤γ0 −→ N Iterate until convergence: 1) Bid modification and communication: each n ∈ N
(a) calculates hkn defined as
hkn := C ′ n(αλ k + βkn) N − 1 N + αλk(2−N) + βkn αN
− 1 N 1⊤γk + γkn,
where k indexes the time step of the algorithm. (b) modifies its bid as
β̃kn = β k n − ρnhkn. (26)
(c) β̃kn −→ BRP 2) Bid update and communication:
(a) BRP : β̃k −→ DSO (b) DSO enforces the security constraints: βk+1 = argminz∈Ψ ||z − β̃k|| (27) (c) DSO : βk+1 −→ BRP
3) Price update and communication: (a) BRP computes λk+1 from (10), given the value of βk+1. (b) BRP : βk+1n , λ
k+1 −→ N 4) Dual variable update and communication:
(a) each n ∈ N updates γn based on γk+1n = projR+(γ k n + νn(2x k+1 n − xkn − x̂n)). (28) (b) each n ∈ N : γk+1n −→ BRP (c) BRP : 1⊤γk+1 −→ N
In the proposed algorithm, ρn and νn are the step sizes which should be sufficiently small to ensure convergence as shown in the next subsection. The variable β̃n is an interme-
vii
diate variable and can be interpreted as the primary bid of consumer n. The DSO performs the validation and necessary corrections of all the primary bids (i.e., β̃ = col(β̃n)n∈N ) according to (27). Note that β = β̃ if the primary bids are feasible for DSO; otherwise the bids are modified to the “closest” physically feasible ones. The dual variable γn is associated with the coupling constraint (15). It should be noted that the updates of β̃n in (26) require the price λ and shared aggregative quantity 1⊤γ, with γ = col(γn)n∈N , whereas γn in (28) can be updated using only the consumer n’s local information. Although some global information, such as α and the number of active consumers N are required to execute the algorithm, such parameters are often not private and do not change frequently. b. convergence analysis The following result provides upper bounds for the step sizes ρn and νn in Algorithm 1 such that convergence to vGNE of the game is guaranteed. Proposition 3. Consider the monotonicity and Lipschitz continuity constants ηF and κF given in Lemma 1. If
κ2F 2ηF < 1 ρ̄ − ν̄, (29)
with ρ̄ := max{ρn}n∈N and ν̄ := max{νn}n∈N , then the vector β in Algorithm 1 converges to the v-GNE of the game. Proof. First, we write our algorithm in a compact form. Bearing in mind (10) and (11), we can rewrite (26) and (28) as
β̃kn = β k n − ρn ( fn(β k n, β k −n)− 1/N1⊤γk + γkn ) , (30)
γk+1n = projR+ ( γkn + νn ( 21⊤(βk − βk+1)/N
+ (2βk+1n − βkn)− x̂n + xtot/N )) . (31)
By letting R := diag(ρn)n∈N , V := diag(νn)n∈N and noting that projΨ(β̃) = argminz∈Ψ ||z− β̃||, the above dynamics can be written as βk+1 = projΨ ( βk −R(F (βk) +A⊤γk) ) , (32)
γk+1 = projR+N
( γk + V (2Aβk+1 −Aβk − x̂+ b) ) , (33)
where A = I − 1N 11 ⊤ as before. Note that Ψ is closed and convex, the mapping F is ηF -monotone and κF -Lipschitz continuous by Lemma 1. In addition, we have λmax(A) = 1. The above dynamics then have the similar structure as the Preconditioned Forward Backward algorithm in [27]. Therefore, by following the footsteps of the proofs of [27, Proposition 1 and Therorem 1], we can show that if the step sizes ρn and νn are sufficiently small, in particular satisfying (29), then the sequence (βk, γk) converges to (β∗, γ∗) where β∗ is the v-GNE. We omit the details for brevity. v. case study We perform an extensive numerical study on the modified IEEE 33 bus distribution network [33] to validate the proposed market mechanism. This network is shown in Fig. 3. For practical reasons, this benchmark network is enhanced in several aspects. In particular, the ratio of lines’ reactance to resistance is decreased, reactive power compensators are
integrated and more strict voltage limits are imposed. The energy generation and consumption profiles are also based on [33]. We consider linear-quadratic cost functions for consumers as Cn(xn) = 12anx 2 n + bnxn. The parameters an and bn are arbitrarily selected in the intervals [0.003, 0.005]$/(kWh)2 and [0.35, 0.45]$/kWh, respectively. These cost functions satisfy Assumption 1 with κ = 0.005. The maximum available flexibilities, {x̂n}n∈N are also arbitrarily selected with∑
n∈N x̂n ≥ xtot = 100kWh. The BRP can choose the parameter in the interval α = δ 2κ(N−1) with δ ∈ (0, 1). Note that the latter choice satisfies the condition in Proposition 1. The step sizes ρn and νn are chosen such that (29) holds. In the following, we first show the economic efficiency of our mechanism. Next, we evaluate the importance of having physical constraints in our model. Finally, we test the effectiveness of our proposed algorithm. a. efficiency analysis In this part, we mainly focus on the advantages of our market mechanism in terms of market efficiency. We do not incorporate the physical network constraints in our model here, to make it consistent with the setup in [21] and [22] where the physical network is neglected. We study three cases as follows. Case 1: Each consumer reveals its true cost function and constraints to the BRP. In this case, we solve the social welfare maximization problem (22). Case 2: Each consumer chooses the supply function in [21] and [22] as its bidding strategy. Case 3: As in our market mechanism, each consumer chooses the y-intercept of its linear supply function (βn) as its bidding strategy. Moreover, we study two scenarios for each case. In Scenario 1, we consider only the nonnegative lower bound on the available flexibility xn to be consistent with [21], whereas in Scenario 2 we consider also the upper bound x̂n consistent with [22]. Fig. 4 and Fig. 5 show the clearing prices and PoAs in Scenario 1 and Scenario 2, respectively. From the plots, we can see that in Case 1, which is a perfectly competitive market, as the number of active consumers increases, the clearing prices decrease and PoAs are always equal to 1. In the next two cases, the clearing prices also decrease. This is due to the fact that in an imperfectly competitive market, the market power of individuals decreases with the increase of market participants. Moreover, we observe that in both scenarios, the clearing
viii
prices and PoAs in Case 3 (corresponding to the proposed results) are closer to the outcomes of Case 1 (corresponding to the social welfare maximization). In particular, when upper bounds on local flexibility constraints are imposed, the price and PoA becomes very high in Case 2 (see Fig. 5), which can reduce economic efficiency of the market operation. Bearing in mind that α scales linearly with respect to the parameter δ, we observe that the proposed mechanism performs quite well in terms of market efficiency, especially when α becomes larger. b. security analysis Next, we highlight the importance of including physical (security) constraints by comparing the results with and without including such constraints in our model. We consider 12 consumers providing flexibility services for BRP. For the sake of simplicity, we assume only one consumer is connected to each bus and we label each active consumer by the bus number it is connected to. We investigate two scenarios: Scenario 1: There is an energy surplus. In this scenario, to consume the extra energy from the transmission system, an active consumer with flexible loads is rewarded to consume more energy. Scenario 2: There is an energy deficit. In this scenario, an active consumer with distributed generators is getting paid to provide extra energy for the BRP. Fig. 6 shows the flexibility allocation and the corresponding voltage magnitudes in Scenario 1. We can see if the restriction
on the voltage magnitudes is not considered, the voltage magnitude of bus 30 drops below the (standard) lower bound v = 0.95. On the other hand, when security constraints are incorporated in the design, the consumers 28, 31 and 33 provide less flexibility while consumers 20, 22, 24 and 25 provide more, thereby avoiding the voltage collapse at bus 30. The flexibility allocations and the corresponding power flows in Scenario 2 are shown in Fig. 7. These results illustrate that to avoid line 17 being congested, consumer 18 should decrease its flexibility significantly. In practice, this means active consumer 18 cannot provide more flexibility since it has provided a large amount of energy in day-ahead market. In general, incorporating the physical constraints might extensively alter the flexibility allocation results, and clearing the market without considering the physical constraints can jeopardize the system’s secure operation. c. convergence properties of algorithm 1 We use the same setup as in Scenario 2 of the previous subsection. Fig. 8 shows the evolution of the bids β and the dual variables γ, where the latter are associated with the maximum availability constraints. As it can be seen from the figure, the algorithm converges in 400 iterations. In addition,
ix
the dual variable corresponding to consumer 28 takes positive values as soon as (∼ Iteration 200) its allocated flexibility reaches its maximum available flexibility. In addition, due to the line capacity constraints as shown in Fig. 7, consumer 18’s strategy is restricted to −6.21, which leads to a few flexibility allocation for this consumer. In order to better see the transient performance of the algorithm, we also show in Fig. 9 the normalized error of the flexibility profile, i.e. ∥xk − x∗∥2/∥x∗∥2, where the x∗ is the flexibility allocation at the v-GNE of the game G. As can be seen from the figure, the error signal converges to zero after a short transient response. Finally, we investigate the scalability of our algorithm by observing the required number of iterations for convergence as we increase the number of active consumers. To this end, we consider the stopping criterion
∥βk+1 − βk∥2 + ∥γk+1 − γk∥2 < 10−5. We assign active consumers to the buses of distribution arbitrarily. Table I shows that the required number of iterations increases linearly with respect to the number of active consumers, demonstrating the scalability of our method. vi. conclusion We present a game-theoretic market framework for procuring flexibility services within the distribution network. To address the privacy concerns of market participants and the associated information sharing limitations, we adapt a semidecentralized GNE-seeking algorithm to solve the formulated game. Through numerical experiments, we assess the performance of our proposed mechanism in terms of both economic efficiency and operational security.