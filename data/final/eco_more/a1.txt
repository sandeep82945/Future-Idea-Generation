We take the classic facility location problem and consider a variation, in which each agent’s individual cost function is equal to their distance from the facility multiplied by a scaling factor which is determined by the facility placement. In addition to the general class of continuous scaling functions, we also provide results for piecewise linear scaling functions which can effectively approximate or model the scaling of many real world scenarios. We focus on the objectives of total and maximum cost, describing the computation of the optimal solution. We then move to the approximate mechanism design setting, observing that the agents’ preferences may no longer be single-peaked. Consequently, we characterize the conditions on scaling functions which ensure that agents have single-peaked preferences. Under these conditions, we find results on the total and maximum cost approximation ratios achievable by strategyproof and anonymous mechanisms. 1 introduction The facility location problem is a widely studied problem, with decades of literature spanning the fields of operations research, economics, and computer science. In the classic variant of the problem, agents are located on a unidimensional interval, and we are tasked with finding an ideal location to place a facility which serves these agents. The agents have single-peaked preferences for the facility location, as they incur a cost equal to their distance from the facility. This problem models many real-world single-peaked social choice and preference aggregation problems. The geographical placement of public facilities such as libraries and parks is an immediate example [15], and the problem can also be applied to choose a political or economic outcome [5, 8], or to decide how to divide a budget [9]. Furthermore, the one-dimensional setting can be generalized to a multi-dimensional setting with an L1 distance metric [19, 11], or extended to a network setting [22]. In our setting, we assume that the agents’ locations are private information, and take a strategyproof mechanism design approach to the classic facility location problem. We also add an additional dimension of complexity: each agent’s cost is scaled by an external factor corresponding to the facility’s location on the domain. Specifically, there is a (continuous) scaling function which maps the facility location to a positive scaling factor which is multiplied by each agent’s distance to calculate their individual costs. A local minimum of the scaling function implies that the facility is particularly effective when placed at this point. The primary motivation for our model is the placement of a cell-phone tower, which is most effective when it is on top of a hill, and less effective as it is placed lower on the hill. Each signal broadcasted or received by the radio tower has a failure probability depending on its elevation, and this averages out over time to be the facility’s effectiveness in a multiplicative sense. Other examples include the proximity of the facility to a river or public transportation, or of a warehouse to a shipping port. Similarly, placing the facility at a local maximum is relatively ineffective (such as placing the cell phone tower at the bottom of a valley, or a public facility next to a garbage dump), and the scaling function improves up to an extent as the facility moves away from this point. In our paper, we consider the general class of continuous scaling functions, as well as piecewise linear scaling functions due to their simplicity in modelling real-world problems, and because they can approximate more complex scaling functions. To demonstrate our model, consider the example in Figure 1, where there are two agents at 0 and one agent at 0.6, and the scaling function is 2−3y for y ≤ 0.5, and 3y−1 for y > 0.5. Under the classic model, the median and midpoint mechanisms are known to minimize total and maximum cost, respectively. In our example, they place the facility at 0 and 0.3 respectively, resulting in 0.6× 2 = 1.2 total cost and 0.33 maximum cost. However, placing the facility at the scaling function’s minimum of 0.5 is optimal for both objectives, leading to 0.55 total cost and 0.25 maximum cost. The goal of our paper is to design strategyproof mechanisms for our scaled facility location problem, that have ideal approximations of the optimal total or maximum cost. These two objectives are standard measures of efficiency and egalitarian fairness in facility location mechanism design [20]. A key consequence of the scaling function is that the agents’ preferences may no longer be single-peaked, and thus we cannot immediately leverage existing characterizations of strategyproof mechanisms under single-peaked preferences (e.g., [16, 5]). We therefore consider the sufficient and necessary conditions on the scaling function such that the agents’ preferences are single-peaked, and design reasonable strategyproof mechanisms for such scaling functions. Contributions 2 related work The facility location problem can be interpreted as a special case of preference aggregation when agents have symmetric and single-peaked preferences over a continuous range of outcomes, in which there has been decades of research in strategyproof aggregation rules. For general preferences, the famous GibbardSatthertwaite theorem implies that a surjective and strategyproof rule must be dictatorial [10, 21]. This impossibility result vanishes when we consider the restricted domain of single-peaked preferences, in which there have been numerous characterizations of strategyproof rules. Most notably, under this restricted domain, Moulin [16]’s seminal paper characterizes the space of strategyproof and anonymous rules as Phantom mechanisms which output the median of the agent locations and n + 1 constant ‘Phantom’ values. This characterization was later extended to the domain of symmetric and single-peaked preferences by Border and Jordan [5] and Massó and Moreno De Barreda [14]. Other characterizations of strategyproof rules have been proposed for similar settings by [4, 17, 18, 12]. The paper most similar to our work considers the facility location model with entrance fees [13], in which agents incur, in addition to their distance from the facility, an additive cost which depends on the facility placement. In this model, the authors give strategyproof mechanisms and compute their approximation ratios with respect to the total and maximum cost objectives. The key difference with our model is that our agents experience a multiplicative scaling factor to their cost, whilst their agents experience an additional additive cost. Our work and [13] are inspired by the line of research on approximate mechanism design without money, initially proposed for the facility location problem by Procaccia and Tennenholtz [20]. In their paper, the authors compute the worst-case ratio between the performance of strategyproof mechanisms and welfare-optimal mechanisms. There have since been many papers applying this approach to variations of the facility location problem, such as when there are proportionally fair distance constraints [3], when facilities have capacity limits [2, 1], or when the facility is obnoxious (i.e., agents prefer to be far away from the facility) [7]. A recent survey of related work is given by Chan et al. [6]. 3 model We have a set of agentsN = {1, . . . , n}, where agent i has location xi on the domain 1 X := [0, 1]. Although we consider the space of potentially non-anonymous mechanisms, we assume for simplicity that agent locations are ordered such that x1 ≤ · · · ≤ xn. This does not affect the nature of our results. A scaling function q : X → R>0 gives the effectiveness of a facility. 2 We also assume that the scaling function is continuous. As we will show in Proposition 1, continuity of q is required for the optimal facility location to be well-defined. Denoting Q as the space of all scaling functions, facility location mechanism f : Q×Xn → X maps the agent location profile x = (x1, . . . , xn) to the location of a facility y. We define the cost incurred by agent i as its distance from the facility multiplied by the scaling factor: ci(q, y) := q(y)|y − xi|. Finally, we define the total cost of an instance as TC(q, y,x) := ∑
i ci(q, y) = q(y) ∑
i |y − xi|, and the maximum cost of an instance as MC(q, y,x) := maxi ci(q, y) = q(y)maxi |y − xi|. Respectively, we denote the optimal facility location which minimizes the total cost (resp. maximum cost) as y∗TC (resp. y ∗ MC). It is typically ideal for the mechanism output to be independent of the agents’ labelling, so we are concerned with mechanisms that satisfy anonymity. Definition 1. A mechanism f is anonymous if its output does not change when the agents’ labels are permuted. 4 computing the optimal solution In this section, we investigate the properties of the optimal facility locations for total cost y∗TC and maximum cost y∗MC . We begin by justifying our assumption that the scaling function q must be continuous, as a discontinuity may result in the optimal solution being not well-defined. 1 Although we consider the unit interval domain, our results can be scaled and shifted to any compact interval on R. We consider a bounded domain so that a single-peaked linear scaling function does not take negative values. 2 If there is a point y where q(y) = 0, then it is trivial to place the facility at that point. Proposition 1. There exists a scaling function with a discontinuity and an agent location profile such that the optimal facility locations for total cost y∗TC and maximum cost y ∗ MC are not well-defined. Proof. Consider the location profile x = (0, 0.5, 1) and the scaling function q(y) =
{
1, y ∈ [0, 0.5], 0.5, y ∈ (0.5, 1]. The
optimal facility locations for total cost and maximum cost are the right limit y∗ → 0.5+, but not at y∗ = 0.5, so the optimal solutions are not well-defined. 4.1 total cost We now give computational results on the optimal facility location for total cost, beginning with the class of linear scaling functions. Proposition 2. If q is a linear function, the optimal facility location for total cost y∗TC is either on one of the agents’ locations, or the minimum value of q. Proof. Since q is a linear function, it is of the form q(y) = ay + b, where a ∈ R and b ∈ R>0. If a = 0, then q(y) is constant, and thus the optimal facility location is on the median agent.3
Due to symmetry, it suffices to consider the case where the scaling function is increasing, i.e., a > 0. From this assumption, we know that the optimal solution cannot lie to the right of xn. Since q is increasing with y, its minimum value is on y = 0. We denote x0 := 0, and we know the optimal solution y∗ is in the interval [x0, xn]. Suppose the optimal solution y
∗ is in the interval [xn1 , xn1+1], where n1 ∈ [0, n − 1] denotes the number of agents on the left-hand side of y
∗. Also, let n2 = n − n1 denote the number of agents on the right-hand side of y∗. Recall that the total cost corresponding to y∗, TC(q, y∗,x) is q(y∗) ∑ i |y ∗ − xi|. Considering the term
∑
i |y ∗ − xi|, we have
n ∑
i=1
|y∗ − xi| =
n1 ∑
i=1
(y∗ − xi) +
n ∑
i=n1+1
(xi − y ∗)
= (n1 − n2)y ∗ +
n ∑
i=n1+1
xi −
n1 ∑
i=1
xi. We remark that ∑ i |y ∗ − xi| can also be written as a linear function of y ∗: ∑ i |y ∗ − xi| = a ′y∗ + m with a′ := n1 − n2, and m :=
∑n i=n1+1 xi − ∑n1
i=1 xi. We can therefore express the total cost as the following function of y∗. TC(q, y∗,x) = q(y∗) · ∑
i
|y∗ − xi|
= (ay∗ + b)(a′y∗ +m)
= aa′(y∗)2 + (am+ a′b)y∗ + bm. Now we know that the total cost function can either be a linear function or a quadratic function of y∗, depending on whether a′ = 0, a′ < 0, or a′ > 0 (recalling that a > 0). There are three cases: either the total cost function is a linear function (a′ = 0), a quadratic function which opens downwards (a′ < 0), or a quadratic function which opens upwards (a′ > 0). For the first two cases, it is clear that the minimum value of the total cost function must lie on an endpoint of the interval [xn1 , xn1+1]. It remains to consider the last case (a′ > 0), where the total cost function q(y∗) ∑
i |y ∗ − xi| = aa ′y∗ + (am+ a′b)y∗ + bm opens upwards. Consider the total cost function on the larger domain of R. Since a′ = (n1 − n2) > 0, we know there exists z1 ∈ R such that a
′z1 +m = 0. Also, since a > 0, there exists z2 ∈ R such that q(z2) = 0. As a result, we see that the total cost function is equal to zero at either one or two points on R; we now show that both of these points lie to the left of xn1 . 3 If there are an even number of agents, we break the tie in favour of the leftmost agent in the optimal interval. For the term a′y∗+m, we know that a′z1+m = 0, and thus z1 = − m a′ =
∑n i=n1+1 xi− ∑n1 i=1 xi
n2−n1 . Consider the
numerator ∑n
i=n1+1 xi − ∑n1 i=1 xi. We know there are n2 agents between (xn1 , xn], implying ∑n i=n1+1 xi >
n2 · xn1 . Similarly, we know there are n1 agents between [0, xn1 ], implying ∑n1
i=1 xi ≤ n1 · xn1 . Combining these inequalities gives us
n ∑
i=n1+1
xi −
n1 ∑
i=1
xi > n2xn1 − n1xn1 > 0. As we have assumed a′ > 0, we know n2 − n1 < 0 and thus z1 = ∑ n i=n1+1 xi− ∑n1 i=1 xi
n2−n1 < xn1 . Now consider z2, which satisfies q(z2) = 0. Clearly, z2 < 0 as we must have q(y) > 0 for y ∈ [0, 1] and a > 0, implying z2 < xn1 . Since z1, z2 < xn1 , the total cost function must be strictly increasing in [xn1 , xn1+1], so its minimum value must lie on xn1 , which is either an agent location or the minimum value of q. We can generalise this result to continuous, piecewise linear scaling functions. Theorem 1. Let the scaling function q be a continuous, piecewise linear function. The facility location minimizing total cost y∗TC is either on one of the agents’ locations or on a local minimum of q. Proof. First, consider each line segment on q, which is represented by a linear function qj on the sub-domain [cj , dj ], where cj , dj ∈ X . Let y ∗ j := argminyj∈[cj,dj] TC(q, yj,x) denote the optimal facility placement on [cj , dj ], and ej := argminy∈{cj,dj} q(y) be the minimum point of q on [cj , dj ]. By Proposition 2, we must have y∗j ∈ {ej, x1, . . . , xn}. Therefore, considering all of the qj functions, the optimal solution y
∗ must lie at one of the agents’ positions or at a local minimum of qj . Corollary 1. When q is a continuous, piecewise linear function with a constant number of local minima, the optimal facility location can be found in linear time by simply iterating over the agent locations and the local minima of the scaling function. As we assume agent locations are private information, there is a concern that agents may misreport their locations to unfairly attain a better facility placement. It is therefore ideal to implement a strategyproof mechanism, which does not incentivize agents to lie about their locations. Definition 2 (Strategyproofness). A mechanism f(·) is strategyproof if for every agent i ∈ N , we have, for every scaling function q and agent locations x′i, x−i and xi,
ci(q, f(xi, x−i)) ≤ ci(q, f(x ′ i, x−i)). However, we find that the optimal solution is not strategyproof. Proposition 3. The optimal facility placement which minimizes total cost is not strategyproof, even if the scaling function is a linear function and there are only 3 agents. Proof. Suppose the scaling function is q(y) = 1 − 45y and the agent location profile is x = (0.3, 0.4, 0.7). The optimal facility placement is y = 0.4, which leads to a cost of 0.204 for agent x3. However if agent x3 misreports x′3 = 0.755, then the facility placement is instead y
′ = 1, which leads to a cost of 0.06. Hence the optimal facility placement is not strategyproof. 4.2 maximum cost We now consider the optimal facility location for maximum cost. It is well-known that in the classic setting, placing the facility at the midpoint of the leftmost and rightmost agents is optimal for maximum cost but not strategyproof [20]. This implies that y∗MC is not strategyproof in our setting. However, it is easily computable in constant time when q is a linear function, as there are only three possible solutions. Proposition 4. If q is a linear function, the optimal facility location for maximum cost satisfies y∗MC ∈ {0, x1+xn2 , 1}. Proof. Suppose q is of the form q(y) = ay + b, and recall that the maximum cost of the instance is MC(q, y,x) = maxi ci(q, y) = maxi(ay + b)|y − xi|. Due to symmetry it suffices to consider a > 0. Since a > 0, we know that y∗MC /∈ (xn, 1], as such a facility placement has a strictly higher cost for all agents than a facility on xn. We also know that y ∗ MC /∈ ( x1+xn 2 , xn]. This is because for every facility placement on this interval, there is a ‘symmetric’ facility placement y ∈ [x1, x1+xn
2 ) where the maximum (unscaled) distance is the same, but the scaling function value is lower. We therefore know that y∗MC ∈ [0, x1+xn 2 ]. When the facility satisfies y ≤ x1+xn2 , then we also know that agent n incurs the highest cost, as it has the highest unscaled distance from the facility. We now know that if a > 0, the maximum cost is MC(q, y, x) = cn(q, y) = (ay + b)(xn − y), which is a quadratic function of y that opens downwards. Therefore the maximum cost is minimized when y = 0 or y = x1+xn
2 . By symmetry, if a < 0, agent 1 incurs the maximum cost of MC(q, y, x) = c1(q, y) = (ay+ b)(y−x1), which is minimized when y = 1 or y = x1+xn2 . We therefore have y ∗ MC ∈ {0, x1+xn 2 , 1}. We can also similarly show that when computing y∗MC for continuous scaling functions, we only need to consider the optimal facility location with respect to the leftmost and rightmost agents. Proposition 5. For continuous scaling functions, the optimal facility location for maximum cost satisfies
y∗MC ∈
{
argmin y∈[0,
x1+xn 2 ]
cn(q, y), argmin y∈[
x1+xn 2 ,1]
c1(q, y), x1 + xn
2
}
. Proof. If y ∈ [0, x1+xn2 ], then agent n receives the highest cost in the instance, similar to the proof of Proposition 4. A symmetric argument shows that if y ∈ [x1+xn2 , 1], then agent 1 receives the highest cost in the instance. Therefore y∗MC is either on the minimum value of cn(q, y) on y ∈ [0, x1+xn 2 ], the minimum value of c1(q, y) on y ∈ [ x1+xn 2 , 1], or on x1+xn 2 . We next investigate whether there exist non-trivial strategyproof mechanisms for this setting. 5 achieving single-peaked preferences When agents have single-peaked preferences along a real line domain, Moulin [16] characterized the set of anonymous and strategyproof mechanisms as phantom mechanisms, which place the facility at the median of the n agent locations and n+ 1 constant ‘phantom’ points. Definition 3 (Phantom Mechanism). Given x and n+1 constant values 0 ≤ p1 ≤ p2 ≤ · · · ≤ pn+1 ≤ 1, a phantom mechanism places the facility at med{x1, · · · , xn, p1, · · · , pn+1}. However, we find that in our setting, phantom mechanisms are not necessarily strategyproof. Even the wellstudied median mechanism, a phantom mechanism with ⌈n+12 ⌉ phantoms at 0 and ⌊ n+1 2 ⌋ phantoms at 1, is not strategyproof. Proposition 6. The median mechanism is not strategyproof. Proof. Consider the agent location profile x = (0.5, 0.7, 0.9) and the scaling function q(y) =
{
6− 10y, y ≤ 0.5,
10y − 4, y > 0.5. The median mechanism places the facility at y = 0.7, and it leads to a cost of 0.6 for agent x3. However if the agent at x3 misreports to x ′ 3 = 0.5, then the median facility placement will be 0.5, which leads to a lower cost of 0.4 for the agent at x3. Hence the median mechanism is not strategyproof. In fact, if there are at least two unique phantom locations, the phantom mechanism is not strategyproof. Theorem 2. Every phantom mechanism with n+ 1 phantoms on at least two unique phantom locations is not strategyproof. Proof. Suppose the n + 1 phantoms are located on k ∈ {2, . . . , n + 1} unique points (a1, a2, · · · , ak). We consider an agent profile such that all the agents are in the interval [a1, a2]. Denoting the number of phantoms on a1 as n
∗, the facility is placed on the (n + 1 − n∗)th agent under this profile. Now suppose the scaling function is
q(y) =
{
3− a1+1a2+1 − 4 a1+a2 y, y ∈ [0, a1+a22 ],
8 a2+1 y − 5a1+3a2a2+1 , y ∈ [ a1+a2 2 , 1]. Case 1 (n + 1 − n∗ ∈ {2, . . . , n}): With all agents located in [a1, a2], we also specifically let xn−n∗ = a1, xn+1−n∗ = 3a1+a2 4 , and xn+2−n∗ = a1+a2 2 . In such case, the mechanism places the facility at xn+1−n∗ , and the agent at xn−n∗ incurs cost
c(n−n∗)(q, f(x)) = q( 3a1 + a2
4 ) · | 3a1 + a2 4 − a1|
= (3− a1 + 1
a2 + 1 −
4 a1 + a2 · 3a1 + a2 4 )( a2 − a1 4 )
= (1− 1 2 ( a1 + 1 a2 + 1 + 2a1 a1 + a2 ))( a2 − a1 2 ) > (1− a1 + 1
a2 + 1 )( a2 − a1 2 ). The last inequality is due to a1+a1a2+a1 < a1+1 a2+1 . If xn−n∗ misreports to x ′ n−n∗ = a1+a2 2 , then f(x ′) = a1+a22 , and their new cost becomes c(n−n∗)(q, f(x ′)) = (1− a1+1a2+1 )( a2−a1 2 ) < c(n−n∗)(q, f(x)). Case 2 (n + 1 − n∗ = 1): Consider the agent location profile x where x1 = a1+3a2
4 and xn = a2. Here,
we have f(x) = xn+1−n∗ = x1 = a1+3a2
4 . Therefore the cost for agent xn is
cn(q, f(x)) = q( a1 + 3a2
4 ) · | a1 + 3a2 4 − a2|
= ( 8 a2 + 1 · a1 + 3a2 4 − 5a1 + 3a2 a2 + 1 )| a1 + 3a2 4 − 1| = ( 3a2 − 3a1 a2 + 1 )( a2 − a1 4 ) = 3
2 · (1 −
a1 + 1 a2 + 1 )( a2 − a1 2 )
> (1− a1 + 1 a2 + 1 )( a2 − a1 2 ). However if xn misreports to x ′ n = a1+a2 2 , then f(x ′) = a1+a22 . Agent xn will then incur cost
cn(q, f(x ′)) = q( a1 + a2 2 ) · | a1 + a2 2 − a2|
= ( 8 a2 + 1 · a1 + a2 2 − 5a1 + 3a2 a2 + 1 )( a2 − a1 2 ) = (1 − a1 + 1
a2 + 1 )( a2 − a1 2 )
< cn(q, f(x)). Therefore, a phantom mechanism which does not place all phantoms at the same position is not strategyproof. From this theorem, we arrive at the following corollary. Note that the constant mechanism is equivalent to the phantom mechanism with all n+ 1 phantoms at the same location. Corollary 2. The constant mechanism (which places the facility at some constant c ∈ X) is the only anonymous and strategyproof mechanism in our setting. This is because the scaling function may cause the agent’s preference to no longer be single-peaked. To show this, we first define each agent’s utility as the negative of their cost (ui(q, y) := −ci(q, y)), so that their preference (with respect to cost) is single-peaked if and only if their utility is single-peaked. We therefore use the terms ‘utility functions’ and ‘preferences’ interchangeably throughout the paper. Theorem 3. An agent’s preference may not be single-peaked, even if the scaling function is a linear function. Proof. Consider the scaling function q(y) = y + 0.01 and x1 = 0.5. The derivative of agent 1’s utility is u′1(q, y) = 2y− 0.49 when y < 0.5, and u ′ 1(q, y) = −(2y− 0.49) when y > 0.5. For y ∈ [0, 0.245], u ′ 1(q, y) ≤ 0. For y ∈ [0.245, 0.5], u′ ≥ 0. Lastly, for y ∈ [0.5, 1], u′1(q, y) < 0. Therefore u1(q, y) is not single-peaked. However, we can characterize the conditions on the scaling functions which ensure that agents have single-peaked preferences. These conditions hold as long as q is continuous, even if it is not differentiable at a countable set of points D.
Theorem 4. If q is continuous but not differentiable at a countable set of points D := {j|q′(j) does not exist}, the agents’ preferences are guaranteed to be single-peaked if and only if q(y)− |q′(y)| ≥ 0 for all y ∈ [0, 1]\D. Proof. Recall that the utility function for agent xi is
ui(q, y) =
{
q(y)(y − xi), y ≤ xi,
q(y)(xi − y), y ≥ xi. The derivative of u with respect to y is
u′i(q, y) =

 
 
q(y) + q′(y)(y − xi), y ∈ [0, xi)\D,
Not differentiable, y ∈ D ∪ {xi}, −(q(y) + q′(y)(y − xi)), y ∈ (xi, 1]\D. ( =⇒ ) The utility function is single-peaked, so for each agent i, there exists a value ki ∈ (0, 1) such that u′i(q, y) ≥ 0 with y ∈ [0, ki), and u ′ i(q, y) ≤ 0 with y ∈ (ki, 1]. Since agents receive zero cost when the facility is placed at their location, we know the utility function’s ‘peak’ lies on their location, and therefore ki = xi. As a result, we have q(y) + q′(y)(y − xi) ≥ 0 for y ∈ [0, xi)\D, and −q(y) + q
′(y)(y − xi) ≤ 0 for y ∈ (xi, 1]\D. This can also be written as q(y) + q
′(y)(y − xi) ≥ 0 for all y ∈ [0, 1]\({xi} ∪ D). Having xi ∈ [0, 1] implies that (y− xi) ∈ [−1, 1], meaning that our condition is q(y)− |q
′(y)| ≥ 0 for all y ∈ [0, 1]\D. ( ⇐= ) Suppose that a scaling function q satisfies q(y) − |q′(y)| ≥ 0 for all y ∈ [0, 1]\D. We know that for every agent xi, q(y) + q ′(y)(y− xi) ≥ 0 for all y ∈ [0, 1]\({xi} ∪D). The utility function is increasing for y < xi, and decreasing for y > xi. By using this theorem, we can characterize the conditions on linear scaling functions which result in agents having single-peaked preferences. Corollary 3. If q is a linear function of the form q(y) = ay + b, the agents’ preferences are guaranteed to be single-peaked if and only if b ≥ a for a > 0, and b ≥ −2a for a < 0. We also observe that a sufficiently large constant c can be added to any continuous scaling function to ensure that every agent has a single-peaked preference. This can be explained by the scaling function becoming ‘closer’ to a constant scaling function. We can also apply Theorem 4 to piecewise linear scaling functions to characterize the conditions for agents to have single-peaked preferences. Proposition 7. If q is a continuous piecewise linear function where each line segment is of the form qj(y) = ajy + bj, the agents’ preferences are guaranteed to be single-peaked if and only if for each line segment, bj ≥ −2aj when aj < 0, and bj ≥ aj when aj > 0. Proof. From Theorem 4, we know that if the q function is continuous but not differentiable at some set of points D, the utility function is single-peaked if and only if q(y) satisfies q(y)−|q′(y)| ≥ 0 for all y ∈ [0, 1]\D. When aj < 0, the utility function is single-peaked if and only if ajy + bj + aj ≥ 0 ⇒ bj ≥ −2ajy, and when aj > 0, the utility function is single-peaked if and only if ajy+ bj − aj ≥ 0 ⇒ bj ≥ aj(y− 1). Since y ∈ [0, 1], these conditions become bj ≥ −2aj and bj ≥ aj , respectively. 6 approximation ratio results In this section, we give results on the approximation ratio of certain mechanisms. The approximation ratio of a mechanism quantifies its worst-case performance for a specified objective function. Definition 4 (Total Cost Approximation Ratio). Given a mechanism f , its total cost approximation ratio is
max q∈Q,x∈Xn
TC(q, f(x),x) TC(q, y∗TC ,x) . The maximum cost approximation ratio is similarly defined by replacing the total cost expressions TC(q, ·,x) and y∗TC with the corresponding maximum cost expressions MC(q, ·,x) and y ∗ MC . While we have defined the approximation ratio for the general space of scaling functionsQ, we additionally prove approximation ratio bounds for more restricted classes of scaling functions, such as piecewise linear scaling functions, and scaling functions such that agents are guaranteed to have single-peaked preferences. For simplicity of notation, we let rq := maxy∈X q(y) miny∈X q(y) be the ratio between the highest and lowest values of
the scaling function. We begin with an impossibility result in the general continuous setting, which explains our need to restrict the scaling function parameters to ensure single-peakedness and widen the space of strategyproof and anonymous mechanisms. Theorem 5. Every strategyproof and anonymous mechanism has an unbounded approximation ratio for total and maximum cost. Proof. By Moulin [16]’s characterization, a strategyproof and anonymous mechanism in our setting must be a phantom mechanism, as the classic setting is a special case of our setting. By Theorem 2, we also know that a phantom mechanism is only strategyproof if all n+1 phantoms are located at the same location. Such a phantom mechanism is equivalent to the constant mechanism, which has an unbounded approximation ratio as it is not unanimous. As we will show, our approximation ratio results are typically a function of rq. We show that when the scaling function is chosen such that agents have single-peaked preferences, the value of rq is upper bounded by a constant. Theorem 6. When agents’ preferences are single-peaked, rq ≤ e.
Proof. From Theorem 4, we know that q(y) − |q′(y)| ≥ 0 for all y ∈ [0, 1]\D, where D denotes the points where q(y) is not differentiable. First, consider the intervals where q′(y) > 0, and consequently q satisfies q(y) − q′(y) ≥ 0. We define a function g(y) := eyq(y), where g′(y) = ey(q(y)−q′(y)). We know g(y) is non-decreasing because q(y)−q′(y) ≥ 0. Consider the points y1, y2 ∈ [0, 1] where y1 < y2. Since g(y1) ≤ g(y2), we know that e y1q(y1) ≤ e y2q(y2). Also, since q(y) > 0 and ey > 0, we have q(y1)q(y2) ≤ e y2−y1 , which is maximized when y1 = 0 and y2 = 1. Therefore rq ≤ e. Furthermore, the function q(y) = e y satisfies q(y)− |q′(y)| ≥ 0 and has rq = e.
Lastly, consider the intervals where q′(y) < 0, and consequently q satisfies q(y) + q′(y) ≥ 0. Similarly, we define g(y) := e−yq(y), where g′(y) = e−y(q′(y)−q(y)). We know g(y) is non-increasing because q′(y)−q(y) ≤ 0. Consider the points y1, y2 ∈ [0, 1] where y1 < y2. Since g(y1) ≥ g(y2), we know that e −y1q(y1) ≥ e −y2q(y2). Also, since q(y) > 0 and ey > 0, we have q(y2)q(y1) ≤ e y2−y1 , which is again maximized when y1 = 0 and y2 = 1. Therefore rq ≤ e.
When q is a piecewise linear function, the upper bound of rq is dependent on how many line segment pieces the function has. Theorem 7. Suppose the scaling function q is a piecewise linear function with k line segment pieces. When agents’ preferences are single-peaked, rq ≤ (1 + 1 k ) k.
Proof. Suppose for j ∈ {1, . . . , k} that each line segment of q is denoted as qj(y) = ajy+bj. From Theorem 4, for agents to always have single-peaked preferences, we require that q(y)− |q′(y)| ≥ 0 for all y ∈ [0, 1]\{D}, where {D} denotes the set of points where q(y) is not differentiable. This implies that for each line segment, if aj > 0, then ajy + bj − aj > 0 =⇒ bj ≥ (1− y)aj . Similarly, if aj < 0, then bj ≥ −(1 + y)aj . We denote the endpoints of the scaling function’s line segment pieces as the set S = {0, s1, s2 · · · , sk−1, 1}. Consider a line segment piece qj = ajy + bj , where y ∈ [sj−1, sj]. We now find an expression for rqj , which is the ratio between the maximum and minimum values of the scaling function on [sj−1, sj ]. If aj > 0, then rqj = qj(sj)
qj(sj−1) = ajsj+bj ajsj−1+bj . Since we require bj ≥ (1− y)aj on y ∈ [sj−1, sj ], we know that
bj ≥ (1 − sj−1)aj . Therefore rqj = ajsj+bj
ajsj−1+bj ≤ ajsj+(1−sj−1)aj ajsj−1+(1−sj−1)aj = (1 + sj − sj−1). If aj < 0, then rqj = qj(sj−1) qj(sj) = ajsj−1+bj ajsj+bj . Since we require bj ≥ −(1 + y)aj on y ∈ [sj−1, sj ], we know
that bj ≥ −(1 + sj)aj . Therefore rqj = ajsj−1+bj ajsj+bj ≤ ajsj−1−(1+sj)aj ajsj−(1+sj)aj = (1 + sj − sj−1), and we know that for each qj , rqj ≤ (1 + sj − sj−1). Since q is piecewise linear, its global maxima and minima must be elements of S. We take an arbitrary global minimum smin := argminy∈X] q(y) and global maximum smax := argmaxy∈X q(y), where smin, smax ∈ S, and suppose w.l.o.g. that smin < smax. It also suffices to assume that for each line segment qj between smin and smax, we have aj > 0 (i.e. the function is strictly increasing in [smin, smax]). This means that rq is the product of the rqj between smin and smax. Finally, since 1 ≤ rqj ≤ (1 + sj − sj−1), and applying the arithmetic mean-geometric mean inequality, we have rq ≤ k ∏
i=1
(1 + si − si−1) ≤ (1 + 1 k ) k.
When the amount of line segments k approaches infinity, the upper bound of rq asymptotically meets the upper bound of rq = e for general scaling functions. Intuitively, this can also be seen by constructing a piecewise linear function which approximates the function q(y) = ey. We follow up with another result which restricts the space of phantom mechanisms with a bounded approximation ratio. Lemma 1. A phantom mechanism which does not place at least one phantom on 0 and 1 has an unbounded approximation ratio for total cost and maximum cost. Proof. Due to symmetry it suffices to consider phantom mechanisms which do not have any phantoms on 1. If all agents are located at 1, the optimal total and maximum cost are 0, but such a phantom mechanism must place the facility at a location strictly left of 1, as all n + 1 phantoms are strictly left of 1. Therefore the total cost and maximum cost approximation ratios are unbounded. This lemma shows that when proving the approximation results, it suffices to consider phantom mechanisms where p1 = 0 and pn+1 = 1. Such a phantom mechanism is equivalent to a phantom mechanism with only n − 1 phantoms, and is known to characterize the strategyproof and anonymous mechanisms which place the facility between the leftmost and rightmost agent locations [16]. 6.1 total cost We now prove approximation ratio results for the objective of total cost, a standard utilitarian measure of efficiency. We begin by giving a lower bound on the approximation ratio achievable by a phantom mechanism, with a proof which applies to both continuous and piecewise linear scaling functions. Theorem 8. For continuous and piecewise linear scaling functions, any phantom mechanism has a total cost approximation ratio of at least rq. Proof. We consider two cases: either all phantoms are located at 0 or 1, or there is at least one phantom that is not located at 0 or 1. We start with the former case, where the facility is located at some agent. For every such phantom mechanism, we can always construct an instance where the scaling function is highest at the agent that receives the facility, so the corresponding total cost must be at least maxy q(y) ∑
i |fmed(x)− xi|, where fmed is the median mechanism. Now suppose that the instance has an even number of agents, with xn/2 6= xn/2+1, and that the scaling function is lowest at (xn/2 +xn/2+1)/2. Placing the facility at this point
results in the optimal total cost of miny q(y) ∑
i |fmed(x)− xi|, and thus the total cost approximation ratio must be at least rq in this case. Now consider the case where at least one phantom is located in (0, 1). By Lemma 1, it suffices to consider phantom mechanisms with at least one phantom at 0 and 1, so we are interested in where the remaining n − 1 phantoms are placed. We show that for every phantom mechanism f where at least one phantom pj on (0, 1) is not at the lowest point of the scaling function, there exists a phantom mechanism f ′ that places the n− 1 phantoms at the lowest point of the scaling function and has a strictly lower approximation ratio. Specifically, if the scaling function has multiple global minima, the phantoms are placed at the leftmost global minimum on (0, 1). If the scaling function only has global minima on 0 and/or 1, then for sufficiently small ǫ > 0, f ′ places the phantoms at ǫ or 1− ǫ. For every agent location profile x such that f(x) = pj , we claim there exists another profile x′ where, under f ′, the total cost ratio with the optimal total cost is strictly lower. We derive x′ from x by first moving each agent closer to f(x) = pj by a sufficiently small constant factor c > 0 (so that each agent i’s distance changes from |xi − pj | to c|xi − pj |), and then translating the profile such that the facility is co-located4 with the n− 1 phantoms of f ′ and the relative distances between the agents and the facility is the same but multiplied by the sufficiently small constant factor. The distances are still c|xi−pj |, so the ratio of total unscaled distances is still the same. But now the facility is placed at a point where the scaling function value is strictly lower, so the total cost ratio is lower. Therefore f ′ has the lowest approximation ratio of all phantom mechanisms which have at least one phantom on (0, 1). We now show that f ′ has an approximation ratio of at least rq. We define a scaling function q which has a unique global minimum at some point c1 ∈ (0, 1), a unique global maximum at c2 > c1, and a point c3 > c2 where q(c3) = q(c1) + ǫ, for sufficiently small ǫ > 0. Consider a location profile where x1 = c2 < x2 = x3 = · · · = xn = c3. The mechanism f
′ places the facility at x1, resulting in a total cost of (n− 1)(xn − x1)maxy q(y), whilst the optimal total cost is at most (xn − x1)(miny q(y) + ǫ) by placing the facility at c3. Therefore f
′ has an approximation ratio of at least rq. By exhaustion of cases, we see that any phantom mechanism has a total cost approximation ratio of at least rq. From this result, we can also easily see that among all of the phantom mechanisms, placing the facility at the median agent gives the best possible approximation ratio for total cost. Theorem 9. For continuous and piecewise linear scaling functions, the median mechanism has a total cost approximation ratio of rq. Proof. The median mechanismminimizes the sum of distances, so its total cost is at most maxy q(y) ∑
i |fmed(x)− xi|, whilst the optimal total cost is at least miny q(y) ∑
i |fmed(x)− xi|. This shows the approximation ratio is at most rq, and we have a matching lower bound from Theorem 8. Recall that phantom mechanisms characterize all strategyproof and anonymous mechanisms when agents have single-peaked preferences. We can consider scaling functions which ensure that agents have single-peaked preferences, and use Theorems 6 and 7 to find the specific total cost approximation ratio lower bounds for any strategyproof and anonymous mechanism. Corollary 4. For continuous scaling functions, when agents are guaranteed to have single-peaked preferences, any strategyproof and anonymous mechanism has a total cost approximation ratio of at least e.
Corollary 5. For piecewise linear scaling functions with k line segments, when agents are guaranteed to have single-peaked preferences, any strategyproof and anonymous mechanism has a total cost approximation ratio of at least (1 + 1k ) k.
Again, the median mechanism would also give the best total cost approximation ratio, and can be suitably implemented for these restricted sets of scaling functions. However, in a scenario where the scaling function does not guarantee single-peaked agent preferences, phantom mechanisms no longer guarantee strategyproofness, and a constant mechanism has an unbounded approximation ratio. The dictator mechanism, which selects a specific agent to be the dictator and places the facility at their reported location, is known to be strategyproof for general agent preferences (though it is clearly not anonymous). We show that this mechanism has a bounded approximation ratio for total cost. 4 This occurs as long as there are agents on both sides of the phantoms. Since the phantoms are placed at ǫ and 1− ǫ instead of 0 and 1, there is space on both sides of the phantoms. Proposition 8. The dictator mechanism has a total cost approximation ratio of (n− 1)rq. Proof. Suppose there are n− 1 agents at the same location away from the dictator. Also suppose that the scaling function is highest at the dictator’s location, and lowest at the other n−1 agents’ location. The total cost approximation ratio is therefore at least (n−1)rq. To see that the approximation ratio cannot be higher than this, note that the total cost corresponding to the dictator mechanism is at most d(n− 1)maxy∈X q(y) where d ∈ (0, 1], as the dictator receives 0 cost, and the optimal total cost is at least dminy∈X q(y) when not all agents are at the same point. 6.2 maximum cost We next prove approximation ratio results for the objective of maximum cost, a standard measure of egalitarian fairness. We begin by giving the maximum cost approximation ratio of any phantom mechanism with p1 = 0 and pn+1 = 1, and again the proof applies to both continuous and piecewise linear scaling functions. Theorem 10. For continuous and piecewise linear scaling functions, any phantom mechanism with p1 = 0 and pn+1 = 1 has a maximum cost approximation ratio of 2rq. Proof. We first prove that for every phantom mechanism f with p1 = 0 and pn+1 = 1, there exists an agent profile where the facility is placed at either x1 or xn. Due to symmetry, it suffices to consider the former case, where we require that p2 < 1 and x1 = x2 = · · · = xn−1 > p2. Consider such an agent location profile where the facility is placed at x1 and x1 6= xn, and also consider a scaling function which has a global maximum at x1 and a global minimum at x1+xn 2 . We have MC(q, f(x),x) = (xn − x1)maxy∈X q(y) and MC(q, y∗MC ,x) = xn−x1 2 miny∈X q(y), giving MC(q,f(x),x) MC(q,y∗
MC ,x) = 2rq. Thus, for every phantom mechanism with
at least one phantom on 0 and 1, we can construct an agent location profile and scaling function such that the cost ratio is 2rq, proving the lower bound. To see that the approximation ratio is at most 2rq, note that a phantom mechanism with p1 = 0 and pn+1 = 1 ensures the facility is placed within [x1, xn], so the mechanism’s maximum cost is at most (xn − x1)maxy∈X q(y), whilst the optimal maximum cost is at least xn−x1 2 miny∈X q(y). As in the previous section, we can also derive the maximum cost approximation ratios when the scaling functions are restricted such that agents have single-peaked preferences. Corollary 6. For continuous scaling functions, when agents are guaranteed to have single-peaked preferences, any strategyproof and anonymous mechanism has a maximum cost approximation ratio of at least 2e. Corollary 7. For piecewise linear scaling functions with k line segments, when agents are guaranteed to have single-peaked preferences, any strategyproof and anonymous mechanism has a maximum cost approximation ratio of at least 2(1 + 1k ) k.
Finally, we prove the maximum cost approximation ratio for the dictator mechanism, which ensures strategyproofness for all scaling functions. Proposition 9. The dictator mechanism has a maximum cost approximation ratio of 2rq. Proof. Consider an agent location profile where x1 = x2 = · · · = xn−1 and xn 6= x1. When the scaling function has its minimum value at x1+xn2 and its maximum value on the facility/dictator, we have MC(q,f(x),x) MC(q,y∗
MC ,x) = 2rq, showing that the approximation ratio is at least 2rq. For the matching upper bound, we
note that the mechanism’s maximum cost is at most (xn − x1)maxy∈X q(y) and the optimal maximum cost is at least xn−x12 miny∈X q(y). 7 discussion In this paper, we have initiated the study of facility location problems where the agents’ costs include a multiplicative scaling factor which depends on where the facility is placed. This problem applies to many real-world scenarios where the facility’s effectiveness depends on external factors influencing its location. Our results focus on the objectives of total cost and maximum cost, and on both continuous and piecewise linear scaling functions. Although we focus on single-peaked agent preferences and have some mechanism design results for general agent preferences, the agent preferences in our setting are a strict subspace of general preferences, taking the form where the metric distance is multiplied by some continuous scaling function. An open question is to characterize the deterministic mechanisms satisfying strategyproofness and surjectivity under these preferences, which we conjecture to be dictatorships. Finally, our concept of scaling functions can be applied to existing variations of the facility location problem, such as capacitated facilities [1] and obnoxious facility location [7].